!function(a){var b=a.history;if(b){var c=function(){if(!b.state){var c=b.length;b.replaceState({direction:-1,length:c},null,null),b.pushState({direction:1},null,null)}var d=b.state;a.onpopstate=function(){var c=b.state,e=c?c.direction:0;if(-1===e&&e!==d.direction){var f=a.onback;if(f&&"function"==typeof f){var g=function(){b.go(e)};f(b.length-c.length,g),f.length<2&&g()}else b.go(e)}d=b.state},d&&-1===d.direction&&b.forward()};a.addEventListener&&a.addEventListener("pageshow",c)}}(window);